<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <title>LUWRAIN Social приветствует вас!</title>
#parse("inc-head-links.vm")
  </head>
  <body>
    <div class="container_nbs">
#parse("inc-header-login.vm")
      <main class="py-4 px-3" style="grid-area: content;">
        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
          
          #if($items.isEmpty())
            <div class="empty-state">
              <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentColor" viewBox="0 0 16 16" style="opacity: 0.5;">
                <path d="M5 4a.5.5 0 0 0 0 1h6a.5.5 0 0 0 0-1H5zm-.5 2.5A.5.5 0 0 1 5 6h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1-.5-.5zM5 8a.5.5 0 0 0 0 1h6a.5.5 0 0 0 0-1H5zm0 2a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1H5z"/>
                <path d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2zm10-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1z"/>
              </svg>
              <h4 class="mt-3">Пока нет ни одной публикации</h4>
              <p class="mt-2">Будьте первым, кто поделится своей работой!</p>
              <a href="/create/" class="aButton mt-3" style="display: inline-block;">Создать публикацию</a>
            </div>
          
          #else
            #foreach($item in $items)
            <div class="col">
            
              <div class="card h-100 card-article">
                <div class="card-body">
                  <span class="badge bg-primary bg-opacity-10 text-primary mb-2">$item.type</span>
                  <h5 class="card-title mb-3">
                    <a href="$item.link">$item.name</a>
                  </h5>
                  
                  <div class="mb-3">
                    <p class="card-meta mb-1"><strong>Предмет:</strong> $item.subject</p>
                    <p class="card-meta mb-1">
                      <strong>Ссылка:</strong>
                      <div class="link-container">
                        <span class="link-copy" onclick="copyToClipboard('$item.link')">
                          $item.link.substring(0, 15)...
                        </span>
                        <span class="copy-hint" onclick="copyToClipboard('$item.link')">Копировать</span>
                      </div>
                    </p>
                  </div>
                  
                  <div class="card-tags">
                    #foreach($tag in $item.tags)
                    <span class="tag">$tag</span>
                    #end
                  </div>
                </div>

                <div class="card-footer text-muted">
                  Обновлено: <span class="text-nowrap">$item.updated</span>
                </div>

              </div>
            </div>
            #end
          
          #end
        </div>
      </main>
      
      #parse("inc-footer.vm")
    </div>
    
    <script>
      function copyToClipboard(text) {
        navigator.clipboard.writeText(text).then(() => {
          const hints = document.querySelectorAll('.copy-hint');
          hints.forEach(hint => {
            hint.textContent = 'Скопировано!';
            setTimeout(() => { hint.textContent = 'Копировать'; }, 2000);
          });
        });
      }
    </script>
  </body>
</html>